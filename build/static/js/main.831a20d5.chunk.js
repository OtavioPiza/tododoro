(this.webpackJsonptododoro=this.webpackJsonptododoro||[]).push([[0],{131:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),s=n(36),i=n.n(s),o=n(102),u=n(10),l=n(12),d=n.n(l),j=n(2),b=n(22),h=n(7),f=n(61),O=n.n(f),p="/api/auth",x=function(){var e=Object(b.a)(d.a.mark((function e(t,n,r,a,c){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("".concat(p,"/register"),{email:t,firstName:n,lastName:r,username:a,password:c});case 2:return s=e.sent,e.abrupt("return",{status:s.status,data:s.data});case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("".concat(p,"/verify"),{code:n},{headers:{Authorization:t}});case 2:return r=e.sent,e.abrupt("return",{status:r.status,data:r.data});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("".concat(p,"/login"),{username:t,password:n});case 2:return r=e.sent,e.abrupt("return",{status:r.status,data:r.data});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=n(1);try{r=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{token:null,verified:null,username:null}}catch(z){r={token:null,verified:null,username:null}}var k=Object(a.createContext)({register:function(){},verify:function(){},login:function(){},logout:function(){},token:function(){return!1},verified:function(){return!1},username:function(){return!1}}),w=function(e){var t=e.children,n=Object(a.useState)(r),c=Object(h.a)(n,2),s=c[0],i=c[1];Object(a.useEffect)((function(){localStorage.setItem("auth",JSON.stringify(s))}),[s]);var o=function(){var e=Object(b.a)(d.a.mark((function e(t,n,r,a,c,o){var u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c===o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,x(t,n,r,a,c);case 4:201===(u=e.sent).status&&i(Object(j.a)(Object(j.a)({},s),{},{token:u.data.token,verified:!1,username:a}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,s){return e.apply(this,arguments)}}(),u=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.token){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v(s.token,t);case 4:200===e.sent.status&&i(Object(j.a)(Object(j.a)({},s),{},{verified:!0}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw{response:{status:401}};case 2:return e.next=4,m(t,n);case 4:r=e.sent,console.log(r),200===r.status&&i(Object(j.a)(Object(j.a)({},s),{},{token:r.data.token,verified:r.data.verified,username:t}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(g.jsx)(k.Provider,{value:{register:o,verify:u,login:l,logout:function(){i({token:null,verified:null,username:null})},token:s.token,verified:s.verified,username:s.username},children:t})},y=k,C=n(165),S=n(159),I=n(160),T=n(98),W=n(168),q=n(164),N=n(101),G=(n(131),function(){var e=Object(a.useContext)(y);return e.token=e.token?e.token:null,e.verified=e.verified?e.verified:null,e.username=e.username?e.username:null,Object(g.jsx)(C.a,{bg:"light",expand:"md",id:"navbar",children:Object(g.jsxs)(S.a,{children:[Object(g.jsx)(C.a.Brand,{href:"/",id:"brand",children:"TodoDoro"}),Object(g.jsx)(C.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsxs)(C.a.Collapse,{id:"basic-navbar-nav",children:[Object(g.jsx)(S.a,{children:Object(g.jsxs)(I.a,{children:[Object(g.jsx)(T.a,{md:"auto",children:Object(g.jsx)(W.a.Link,{href:"/",children:"Home"})}),Object(g.jsx)(T.a,{md:"auto",children:Object(g.jsx)(W.a.Link,{href:"/",children:"Tasks"})}),e.token&&e.username&&Object(g.jsx)(T.a,{md:"auto",children:Object(g.jsxs)(q.a,{title:"Account",children:[Object(g.jsxs)(q.a.Item,{children:["Hello, ",e.username]}),e.verified||Object(g.jsx)(q.a.Item,{children:"Verify"}),Object(g.jsx)(q.a.Item,{children:"Settings"})]})})]})}),e.token?"":Object(g.jsx)(W.a.Link,{href:"/register",children:"Register"}),Object(g.jsx)(N.a,{id:"button",variant:"outline-danger",href:e.token?"":"/login",onClick:e.token?e.logout:function(){},children:e.token?"Logout":"Login"})]})]})})}),H=n(170),D=n(167),E=(n(80),n(171)),L=n(166),P=function(){var e=Object(a.useContext)(y);e.token=e.token?e.token:null,e.verified=e.verified?e.verified:null,e.username=e.username?e.username:null;var t=Object(a.useState)(!1),n=Object(h.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),i=Object(h.a)(s,2),o=i[0],l=i[1],j=Object(a.useState)(null),f=Object(h.a)(j,2),O=f[0],p=f[1],x=Object(a.useState)(""),v=Object(h.a)(x,2),m=v[0],k=v[1],w=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!r){t.next=3;break}return t.abrupt("return");case 3:return c(!0),t.prev=4,t.next=7,e.login(o,O);case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(4),401===t.t0.response.status?k("Invalid username or password"):k("Something went wrong when connecting to our servers. We have been notified and are currently working on it. Hang thight!"),setTimeout((function(){k("")}),5e3);case 13:c(!1);case 14:case"end":return t.stop()}}),t,null,[[4,9]])})));return function(e){return t.apply(this,arguments)}}();return e.token&&!e.verified?Object(g.jsx)(u.a,{to:"/verify"}):e.token&&e.verified?Object(g.jsx)(u.a,{to:"/tasks"}):Object(g.jsxs)(I.a,{children:[Object(g.jsx)(T.a,{}),Object(g.jsxs)(T.a,{xs:"auto",children:[Object(g.jsx)(H.a,{id:"card",children:Object(g.jsx)(S.a,{id:"container",children:Object(g.jsxs)(D.a,{children:[Object(g.jsx)("h3",{children:"Welcome back!"}),Object(g.jsx)(D.a.Group,{controlId:"username",id:"in",children:Object(g.jsx)(D.a.Control,{placeholder:"Enter username",onChange:function(e){return l(e.target.value)},required:!0})}),Object(g.jsx)(D.a.Group,{className:"mb-3",controlId:"password",id:"in",children:Object(g.jsx)(D.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return p(e.target.value)},required:!0})}),Object(g.jsxs)("div",{id:"buttonHolder",children:[Object(g.jsx)(N.a,{id:"button",variant:"danger",type:"submit",onClick:function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Login"}),r&&Object(g.jsx)(E.a,{color:"inherit"})]})]})})}),Object(g.jsx)("div",{id:"alertDiv",children:m&&Object(g.jsx)(L.a,{id:"alert",open:m&&!0,onClose:function(){return k("")},severity:"error",sx:{borderRadius:"1rem",marginTop:"5px",maxWidth:"100%"},children:m})})]}),Object(g.jsx)(T.a,{})]})},R=function(){var e=Object(a.useContext)(y);e.token=e.token?e.token:null,e.verified=e.verified?e.verified:null,e.username=e.username?e.username:null;var t=Object(a.useState)(!1),n=Object(h.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),o=i[0],l=i[1],j=Object(a.useState)(null),f=Object(h.a)(j,2),O=f[0],p=f[1],x=Object(a.useState)(null),v=Object(h.a)(x,2),m=v[0],k=v[1],w=Object(a.useState)(null),C=Object(h.a)(w,2),W=C[0],q=C[1],G=Object(a.useState)(null),P=Object(h.a)(G,2),R=P[0],A=P[1],J=Object(a.useState)(null),z=Object(h.a)(J,2),B=z[0],F=z[1],V=Object(a.useState)(null),Z=Object(h.a)(V,2),M=Z[0],U=Z[1],$=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!r){t.next=3;break}return t.abrupt("return");case 3:if(B===M){t.next=7;break}return l("Passwords don't match"),setTimeout((function(){l("")}),5e3),t.abrupt("return");case 7:if(!(B.length<8)){t.next=11;break}return l("Password should be at least 8 characters long"),setTimeout((function(){l("")}),5e3),t.abrupt("return");case 11:if(String(R).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){t.next=15;break}return l("Invalid email"),setTimeout((function(){l("")}),5e3),t.abrupt("return");case 15:return c(!0),t.prev=16,t.next=19,e.register(R,m,W,O,B,M);case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(16),400===t.t0.response.status?t.t0.response.data.includes("email: Error")&&t.t0.response.data.includes("username: Error")?l("Both the username and email have to be unique"):t.t0.response.data.includes("email: Error")?l("This email is already taken"):t.t0.response.data.includes("username: Error")?l("This username is already taken"):l("Invalid email"):l("Something went wrong when connecting to our servers. We have been notified and are currently working on it. Hang thight!"),setTimeout((function(){l("")}),5e3);case 25:c(!1);case 26:case"end":return t.stop()}}),t,null,[[16,21]])})));return function(e){return t.apply(this,arguments)}}();return e.token&&!e.verified?Object(g.jsx)(u.a,{to:"/verify"}):e.token&&e.verified?Object(g.jsx)(u.a,{to:"/tasks"}):Object(g.jsxs)(I.a,{children:[Object(g.jsx)(T.a,{}),Object(g.jsxs)(T.a,{xs:"auto",children:[Object(g.jsx)(H.a,{id:"card",children:Object(g.jsx)(S.a,{id:"container",children:Object(g.jsxs)(D.a,{children:[Object(g.jsx)("h3",{children:"Welcome to TodoDoro!"}),Object(g.jsx)("p",{children:"We can't wait to have you with us! Fill out with your information and we'll be done in no time."}),Object(g.jsxs)(D.a.Group,{controlId:"email",id:"in",children:[Object(g.jsx)(D.a.Control,{placeholder:"Email",onChange:function(e){return A(e.target.value)},type:"email",required:!0}),Object(g.jsx)(D.a.Text,{children:"Please enter a valid email. We will send you a verification code. We will never share your information."})]}),Object(g.jsx)(D.a.Group,{controlId:"firstName",id:"in",children:Object(g.jsx)(D.a.Control,{placeholder:"First name",onChange:function(e){return k(e.target.value)},required:!0})}),Object(g.jsx)(D.a.Group,{controlId:"lastName",id:"in",children:Object(g.jsx)(D.a.Control,{placeholder:"Last name",onChange:function(e){return q(e.target.value)},required:!0})}),Object(g.jsx)(D.a.Group,{controlId:"username",id:"in",children:Object(g.jsx)(D.a.Control,{placeholder:"Username",onChange:function(e){return p(e.target.value)},required:!0})}),Object(g.jsx)(D.a.Group,{className:"mb-3",controlId:"password",id:"in",children:Object(g.jsx)(D.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return F(e.target.value)},required:!0})}),Object(g.jsx)(D.a.Group,{className:"mb-3",controlId:"passwordConfirm",id:"in",children:Object(g.jsx)(D.a.Control,{type:"password",placeholder:"Retype password",onChange:function(e){return U(e.target.value)},required:!0})}),Object(g.jsxs)("div",{id:"buttonHolder",children:[Object(g.jsx)(N.a,{id:"button",variant:"danger",type:"submit",onClick:function(e){return $(e)},children:"Register"}),r&&Object(g.jsx)(E.a,{color:"inherit"})]})]})})}),Object(g.jsx)("div",{id:"alertDiv",children:o&&Object(g.jsx)(L.a,{id:"alert",open:o&&!0,onClose:function(){return l("")},severity:"error",sx:{borderRadius:"1rem",marginTop:"5px",maxWidth:"100%"},children:o})})]}),Object(g.jsx)(T.a,{})]})},A=function(){var e=Object(a.useContext)(y);e.token=e.token?e.token:null,e.verified=e.verified?e.verified:null,e.username=e.username?e.username:null;var t=Object(a.useState)(!1),n=Object(h.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),o=i[0],l=i[1],j=Object(a.useState)(""),f=Object(h.a)(j,2),O=f[0],p=f[1],x=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),8===O.length){t.next=4;break}return l("Invalid code!"),t.abrupt("return");case 4:return c(!0),t.prev=5,t.next=8,e.verify(O);case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),403===t.t0.response.status&&(t.t0.response.data.includes("code expired")?l("Code expired"):t.t0.response.data.includes("invalid code")?l("Invalid code"):l("Something went wrong when connecting to our servers. We have been notified and are currently working on it. Hang thight!")),setTimeout((function(){l("")}),5e3);case 14:c(!1);case 15:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e){return t.apply(this,arguments)}}();return e.token&&e.verified?Object(g.jsx)(u.a,{to:"/tasks"}):e.token?Object(g.jsxs)(I.a,{children:[Object(g.jsx)(T.a,{}),Object(g.jsxs)(T.a,{xs:"auto",children:[Object(g.jsx)(H.a,{id:"card",children:Object(g.jsx)(S.a,{id:"container",children:Object(g.jsxs)(D.a,{children:[Object(g.jsx)("h3",{children:"One last step!"}),Object(g.jsx)(D.a.Group,{className:"mb-3",controlId:"password",id:"in",children:Object(g.jsx)(D.a.Control,{placeholder:"Code",onChange:function(e){return p(e.target.value)},required:!0})}),Object(g.jsxs)("div",{id:"buttonHolder",children:[Object(g.jsx)(N.a,{id:"button",variant:"danger",type:"submit",onClick:function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Verify"}),r&&Object(g.jsx)(E.a,{color:"inherit"})]})]})})}),Object(g.jsx)("div",{id:"alertDiv",children:o&&Object(g.jsx)(L.a,{id:"alert",open:o&&!0,onClose:function(){return l("")},severity:"error",sx:{borderRadius:"1rem",marginTop:"5px",maxWidth:"100%"},children:o})})]}),Object(g.jsx)(T.a,{})]}):Object(g.jsx)(u.a,{to:"/login"})},J=function(){return Object(g.jsxs)(w,{children:[Object(g.jsx)(G,{}),Object(g.jsx)(o.a,{children:Object(g.jsxs)(u.d,{children:[Object(g.jsx)(u.b,{path:"/login",element:Object(g.jsx)(P,{})}),Object(g.jsx)(u.b,{path:"/register",element:Object(g.jsx)(R,{})}),Object(g.jsx)(u.b,{path:"/verify",element:Object(g.jsx)(A,{})}),Object(g.jsx)(u.b,{path:"/tasks",element:Object(g.jsx)("h2",{children:"Here are your tasks"})})]})})]})};n(138),n(139);i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(J,{})}),document.getElementById("root"))},80:function(e,t,n){}},[[140,1,2]]]);
//# sourceMappingURL=main.831a20d5.chunk.js.map